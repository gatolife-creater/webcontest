# 第二節　ブロックチェーンの基礎となる技術

先生：それではブロックチェーンの基礎となる技術の仕組みと、その活用例を見ていこう。

## Peer to Peer（P2P）

生徒：ぺ、ぺあとーぺあ？

先生：<strong>ピア・ツー・ピア</strong>だ。これはブロックチェーンにおいて、最も重要であると言っても過言ではない。

先生：一般的に用いられる、<strong>クライアント・サーバー・システム</strong>にはないメリットがある。

生徒：ピア・ツー・ピアにクライアント・サーバー・システム？聞きなれない言葉ばっかり...

先生：では、我々の生活に馴染み深いクライアント・サーバー・システムから解説しよう。

***
クライアント・サーバー・システムは、コンピューターを<strong>クライアント</strong>と<strong>サーバー</strong>に役割分担して、情報をやり取りする仕組みです。<br>
クライアントは、サーバーに<strong>情報を要求し</strong>、それを受け取るコンピューター、<br>
サーバーは、クライアントからの要求に応じて、<strong>情報を提供する</strong>コンピューターです。
***

先生：つまり、サーバーはたくさんのコンピューターに情報を提供する、偉〜いコンピューターなのだ。

先生：イザワ君、ピア・ツー・ピアとクライアント・サーバー・システムの図を用意してくれ。

助手：かしこまりました。

### サーバー・クライアント・システム
***
![クライアントサーバーシステムの図](/public/imgs/%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%894.jpeg)

先生：これがクライアント・サーバー・システムを表した図だ。真ん中のものがサーバー、その他のものがクライアントだ。

生徒：クライアント側にスマートフォンやパソコンがありますね！

先生：そうだ。我々はYouTubeを見る時、スマホを使うだろう？つまり、我々のスマホが<strong>クライアント</strong>としてYouTubeの<strong>サーバー</strong>に動画の情報を要求しているというわけだ。

生徒：なるほど〜。

先生：それでは、次にピア・ツー・ピアを見ていこう。

### ピア・ツー・ピア
***

先生：ピア・ツー・ピアは直訳すると「対等なものから対等なものへ」だな。

先生：ピア・ツー・ピアはよく下のような図で表される。

![ピア・ツー・ピアの図](/public/imgs/%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%896.jpeg)

生徒：あれ？サーバーが見当たらないですね...

先生：いいところに気がついているぞ！そう、ピア・ツー・ピアにはクライアント、サーバーという役割分担が存在しないのだ。

生徒：じゃあどうやって情報をやりとりしているんですか？

先生：それは実に簡単だ。各コンピューターが対等な立場で、他のコンピューターに情報を要求すると同時に、情報を提供しているのだ。

助手：つまり、それぞれのコンピューターがクライアントとサーバー、両方の役割を担っているとも言えますね。

先生：その通りだ。さすがイザワ君。全てのコンピューターが同じ役割を持っているから、<strong>「対等なもの」</strong>というわけだな。

生徒：そう言えば、ピア・ツー・ピアのメリットって何ですか。

先生：それは、<strong>一部のコンピューターだけに負担がかかることがないという点だ。</strong>

先生：下の図を見てみよう。

![サーバー・クライアント・システムの障害](/public/imgs/スライド5.jpeg)

生徒：うわぁ、サーバー燃えとる...

先生：これはサーバーに障害が出ていることを表している。

<span style="color:yellow;">NOTE：なんかの説明が欲しい</span>

生徒：じゃあ、ピア・ツー・ピアの方はどうなんですか？

先生：これを見てみろ。

![ピア・ツー・ピアの障害](/public/imgs/スライド7.jpeg)

生徒：一部のコンピューターに障害が発生しているようですね。

生徒：あっ、でも他のコンピューターは通信できてる！

先生：その通り。ピア・ツー・ピアなら一部のコンピューターに障害が発生しても、他のコンピューターが動き続けているかぎり、システムは正常に機能するのだ。

## ハッシュ関数

***
ハッシュ関数は別名 <strong>要約関数</strong>とも呼ばれ、入力した値をもとにランダムに見える値を出力する。<br />
また、ハッシュ関数には以下のような特徴がある。
* 入力した値の長さに関わらず、<strong>常に同じ長さの値を出力する</strong>。
* 同じ値を入力すれば、<strong>常に同じ値が出力される</strong>。
* ハッシュ値から、<strong>元の値を復元</strong>することはできない。
***

<span style="color:yellow;">NOTE：イザワ君によるハッシュ関数の図解</span>

イザワ君：ハッシュ関数のサンプルも作っておきました。これで1と2の特徴を確かめることができます。

<span style="color:yellow;">（ハッシュ関数のサンプル）</span>

生徒：それにしても、ハッシュ関数って一体なんの役に立つんですか？

先生：うむ。いい質問だ。実は、<strong>改ざん検知</strong>や<strong>認証システム</strong>に活用されているのだよ。

### 改ざん検知
***

<span style="color:yellow;">NOTE：改竄検知の仕組みの説明</span>

生徒：
* 同じ値を入力すると、同じ値が出力される。
* 入力値が少し違うだけで、結果が大きく異なる。
<br>この二つの特徴を利用しているのですね。

先生：いかにも。

### 認証システム
***
<span style="color:yellow;">NOTE：認証システムでの活用の説明</span>

生徒：出力値からは入力値を推測できないという性質が役立っていますね！

## 公開鍵暗号方式
***
<strong>公開鍵暗号方式</strong>は、<strong>暗号技術</strong>の一種です。

＊ 暗号技術・・・PDF等のデータを他人に盗み見られることなく、他の人と安全にデータをや取りする技術。

用語がやや難しく聞こえるので、ここで少し勉強していきましょう。

まずは、<strong>公開鍵</strong>。
公開鍵とは、<strong>データを暗号化するときに使われる</strong>鍵です。その名の通り、誰でも使えるように外部に<strong>公開</strong>されており、<strong>秘密鍵</strong>から作られています。

次に<strong>秘密鍵</strong>。<br />
これは、公開鍵で暗号化したデータを
<strong>復号するための鍵</strong>です。
そして、この鍵を所持するのは鍵を作成した人のみ。
<strong>他の人に公開することはありません</strong>。
***

生徒：公開鍵暗号方式...。なんだか難しそうな響きですね。

先生：安心しろ。決して難しい仕組みではない。<strong>秘密鍵</strong>で暗号化し、<strong>公開鍵</strong>で復号するだけだ。

生徒：はぁ...。

先生：ナカモト君、下の図を見てみろ。これは、公開鍵暗号方式の仕組みを簡単にあらわしたものだ。

生徒： まずは受信者が<strong>秘密鍵</strong>と<strong>公開鍵</strong>を作るんですね

![公開鍵暗号方式の仕組みの図](/public/imgs/スライド3.jpeg)

## デジタル署名

生徒：デジタル署名って何ができるんですか？

先生：改ざんの検出、そして<strong>※否認の防止</strong>だ。

先生：公開鍵で復号できるようにすることで、誰もが復号できるようにしている。

生徒：それじゃあ暗号化の意味ないじゃないですか！

先生：そこが重要なのだよ。誰もが復号できるようにすることで、誰もが署名（データ送信者の照合）を確認することができるのだ。

***
※否認・・・データを送信したにも関わらず、送信したことことを否定すること。インターネット上において、どれが元の情報であるか区別することは難しいため、デジタル署名のような方法が採用されている。
***

## まとめ

先生：これらの技術がブロックチェーンの土台だ。かなり難しかっただろう。よく頑張った。次のページではブロックチェーンの長所や使い道について説明するぞ。